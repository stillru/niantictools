import requests
import json

ACSID = "AJKiYcFtMfYVzDHFwxlZuppCgSJHtQ2jDLtCLKJBH-B0B1faLAD_WEURtcdjDH74jsUxr8lDmA4X4I8j9chDbLyn2tDeGH9QgaAYp59jCbcklxKADATSW_ToPN9VszSwObKFq-dsGOB5KUl8TGcYK8d1ILZjFOMql-qJLNYrCmVgiz6dqYp2gfURjes1KYnEXLa6h2kWINEb96Dkf-dRs6jgjuVcl1Rsu4j5ztT59g-eJxfPjEws3UXdw8EVSpI00xcowPe-ZCQa4duBUueI2gva-pmN_7MFcdvlBmHrwKz3wtz0HJjXxk5IoS0--AinsIC8QtRuZ5cgz9fZ47PMhAQaUzp9AxhqxrrpqWBasIFjMPgD9nfZcKob0UttZwPq0hXqGUxISq41816FeAyGT49ycE2ZtMAM-gYgNwrH0jhOT9E6Xh5ymTxvNnVxM4M09tHJCj6gV_0DrJPETblb2piYfnhKPlcP8oDJQkdExSIEodsqEaGCoWlGUTXoiEULhN65Edln0trnN2-CKUW4e8WK5WiWfi48Rbkb2YPnEqfbtqeMB6PACF2lNuf1-cQ6XTnE_lHt0hUu"
csrftoken = "TwLbPIP4gySN4R0qJYdje8RR3r47eiqU"
lat = "47.33393667956077"
lon = "13.298462033271788"
plid = "1"
plqk = "1"
zm = "18"

payload = {"method":"dashboard.getThinnedEntitiesV2","minLevelOfDetail":-1,"boundsParamsList":[{"id": plid,"qk": plqk,"minLatE6":"47333239","minLngE6":"13298950","maxLatE6":"47335100","maxLngE6":"13301697"}]}
url = """http://www.ingress.com/rpc/dashboard.getThinnedEntitiesV2"""
cookie = {"ACSID":ACSID, "ingress.intelmap.lat":lat, "ingress.intelmap.lng":lon, "ingress.intelmap.zoom":zm, "csrftoken":csrftoken}

print "--- debug 1 - Cookies ---"
#cookies = dict(cookie)
print cookie
print "--- debug 2 - Payload ---"
print payload



headers = {
"Host":"www.ingress.com",
"Origin":"http://www.ingress.com",
"Referer":"http://www.ingress.com/intel?ll=55.726337,37.788849&z=10",
"User-Agent":"Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.63 Safari/537.31",
"X-CSRFToken":csrftoken,
"X-Requested-With":"XMLHttpRequest"
}

print "--- debug 3 - Headers ---"
print headers

print "--- Actual work ---"
r = requests.post(url, data=payload, headers=headers, cookies=cookie)

print r.text
